# Nginx load balancer in front of API instances (running on host).
# Start: docker compose -f docker-compose.loadbalancer.yml up -d
# Ensure two instances are running: PORT=8080 and PORT=8081 (see docs/LOAD_TESTING.md)
# Then run load against: http://localhost:8088

services:
  lb:
    image: nginx:alpine
    ports:
      - "8088:80"
    volumes:
      - ./observability/nginx/nginx-lb.conf:/etc/nginx/conf.d/default.conf:ro
    extra_hosts:
      - "host.docker.internal:host-gateway"
